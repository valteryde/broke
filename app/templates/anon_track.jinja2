{% extends "standalone.jinja2" %}

{% block head %}
    <meta name="description" content="Track your ticket status.">
    <link rel="stylesheet" href="/static/css/anon.css">
{% endblock %}

{% block title %}Track Ticket #{{ ticket.id.split('-')[-1] }} - {{ site_name }}{% endblock %}

{% block content %}
<div class="anon-container">
    <div class="anon-card">
        <div class="anon-header">
             <a href="/anon" class="anon-back"><i class="ph ph-house"></i> Home</a>
        </div>

        <div class="anon-track-header">
            <div>
                <div class="anon-track-id">Ticket #{{ ticket.id.split('-')[-1] }}</div>
                <h1 class="anon-title" style="margin-bottom: 0;">{{ ticket.title }}</h1>
            </div>
            <div class="anon-track-status status-{{ ticket.status }}">
                {{ ticket.status|replace('-', ' ')|title }}
            </div>
        </div>
        
        <div class="anon-meta">
            {% if project %}
            <span>
                <i class="{{ project.icon }}" style="color: {{ project.color }}"></i>
                {{ project.name }}
            </span>
            {% endif %}
            <span><i class="ph ph-clock"></i> {{ ticket.created_at|timestamp_to_date }}</span>
             <span class="priority-{{ ticket.priority }}"><i class="ph ph-warning"></i> {{ ticket.priority|title }} Priority</span>
        </div>
        
        <div class="anon-description">
            {{ ticket.description|safe }}
        </div>
        
        <h3 class="anon-section-title" style="margin-top: 3rem;">Activity Timeline</h3>
        <div class="anon-timeline">
            {% for update in ticket.updates %}
                <div class="anon-timeline-item">
                    <div class="anon-timeline-icon">
                        <i class="{{ update.icon }}"></i>
                    </div>
                    <div class="anon-timeline-content">
                        <div class="anon-timeline-message">{{ update.message }}</div>
                        <div class="anon-timeline-time">{{ update.created_at|timestamp_to_date }}</div>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <div class="anon-footer">
            <p><strong>Keep this page open.</strong> This URL is the only way to track your ticket status.</p>
        </div>
    </div>
</div>
{% endblock %}
