{% extends "dashboard.jinja2" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/board.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dropdown.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/lists.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
{% endblock %}

{% block content %}

<h1>Tickets</h1>

<div id="ticket-list"></div>

{% endblock %}


{% block scripts %}

    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="{{ url_for('static', filename='js/dropdown.js') }}"></script>
    <script src="{{ url_for('static', filename='js/lists.js') }}"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ticketList = new List('ticket-list', {
                filters: {
                    search: { placeholder: 'Search tickets...' },
                    labels: { label: 'Labels' },
                    assignees: { label: 'Assignees' },
                    urgency: { label: 'Urgency' },
                    dateRange: { label: 'Date' }
                }
            });

            const tickets = [
                {
                    id: 'DEN-612',
                    title: 'Sample Ticket',
                    description: 'This is a sample ticket description.',
                    icon: 'ph-cell-signal-high',
                    urgency: 'high',
                    labels: [{text: 'bug', color: 'blue'}, {text: 'high-priority', color: 'red'}],
                    assignees: ['alice', 'bob'],
                    createdAt: '2024-06-01'
                },
                {
                    id: 'DEN-613',
                    title: 'Login page error',
                    description: '500 error when submitting login form for some users.',
                    icon: 'ph-cell-signal-medium',
                    urgency: 'medium',
                    labels: [{text: 'backend', color: 'purple'}, {text: 'urgent', color: 'red'}],
                    assignees: ['carol'],
                    createdAt: '2024-06-02'
                },
                {
                    id: 'DEN-614',
                    title: 'Improve onboarding flow',
                    description: 'Streamline steps and add tooltips for first-time users.',
                    icon: 'ph-cell-signal-medium',
                    urgency: 'medium',
                    labels: [{text: 'enhancement', color: 'green'}],
                    assignees: ['dave', 'erin'],
                    createdAt: '2024-06-03'
                },
                {
                    id: 'DEN-615',
                    title: 'Mobile layout fixes',
                    description: 'Header overlaps content on small screens; adjust CSS.',
                    icon: 'ph-cell-signal-low',
                    urgency: 'low',
                    labels: [{text: 'frontend', color: 'teal'}],
                    assignees: ['frank'],
                    createdAt: '2024-06-04'
                },
                {
                    id: 'DEN-616',
                    title: 'Database index optimization',
                    description: 'Add index to speed up analytics queries.',
                    icon: 'ph-cell-signal-medium',
                    urgency: 'medium',
                    labels: [{text: 'performance', color: 'orange'}],
                    assignees: ['gina'],
                    createdAt: '2024-06-05'
                },
                {
                    id: 'DEN-617',
                    title: 'Write unit tests for utils',
                    description: 'Increase coverage for helper functions.',
                    icon: 'ph-checks',
                    urgency: 'medium', /* medium but done thereby ph-checks as icon */
                    labels: [{text: 'tests', color: 'brown'}],
                    assignees: ['harry', 'iris'],
                    createdAt: '2024-06-06'
                },
                {
                    id: 'DEN-618',
                    title: 'Export CSV feature',
                    description: 'Allow users to export reports as CSV files.',
                    icon: 'ph-cell-signal-high',
                    urgency: 'high',
                    labels: [{text: 'feature', color: 'blue'}],
                    assignees: ['jane'],
                    createdAt: '2024-06-07'
                },
                {
                    id: 'DEN-619',
                    title: 'Fix email delivery',
                    description: 'Some transactional emails are not sent; investigate SMTP logs.',
                    icon: 'ph-warning',
                    urgency: 'urgent',
                    labels: [{text: 'infra', color: 'gray'}],
                    assignees: ['kevin'],
                    createdAt: '2024-06-08'
                }
            ];

            tickets.forEach(ticket => ticketList.add(ticket));
        });
    </script>

{% endblock %}
